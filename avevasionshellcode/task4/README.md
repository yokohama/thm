# アセンブリから実行ファイルの作成
```
nasm -f elf64 thm.asm
ld thm.o -o thm
```

### 実行ファイルの.textセクションの確認
```
objdump -d thm
```

### 上記の内容を16進数（シェルコード）でダンプ
```
objcopy -j .text -O binary thm thm.text
xxd -i thm.text
```

### 上記で取得したシェルコードが動くかをCに埋め込み確認。
```
#include <stdio.h>

int main(int argc, char **argv) {
    unsigned char message[] = {
        0xeb, 0x1e, 0xb8, 0x01, 0x00, 0x00, 0x00, 0xbf, 0x01, 0x00, 0x00, 0x00,
        0x5e, 0xba, 0x0d, 0x00, 0x00, 0x00, 0x0f, 0x05, 0xb8, 0x3c, 0x00, 0x00,
        0x00, 0xbf, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x05, 0xe8, 0xdd, 0xff, 0xff,
        0xff, 0x54, 0x48, 0x4d, 0x2c, 0x20, 0x52, 0x6f, 0x63, 0x6b, 0x73, 0x21,
        0x0d, 0x0a
    };
    
    (*(void(*)())message)();
    return 0;
}
```

### Cのコンパイル
- -g デバッグ情報の生成
- -Wall 警告の表示
- -z execstack 実行時にスタックが実行可能(executable)であることを許可する。実際セキュリティ上は非推奨
```
gcc -g -Wall -z execstack thm.c -o thmx
```

### 実行
```
./thmx
THM,Rocks!
```
